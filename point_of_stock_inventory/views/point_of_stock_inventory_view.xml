<?xml version="1.0"?>
<openerp>
    <data>

        <!-- Top menu item -->
        <menuitem name="Point of Stock Inventory"
            id="menu_point_stock_inventory_root"
            groups="point_of_sale.group_pos_manager,point_of_sale.group_pos_user"
            sequence="31"/>

        <record model="ir.ui.view" id="posi_session_opening_form_view">
            <field name="name">posi.session.opening.form.view</field>
            <field name="model">posi.session.opening</field>
            <field name="arch" type="xml">
                <form string="PoSi Session Opening" version="7.0">
                    <field name="posi_state" invisible="1" />
                    <field name="posi_session_id" invisible="1"/>
                    <button name="open_ui" type="object" string="Resume Session"
                        attrs="{'invisible' : [('posi_state', 'not in', ('opened',))]}"
                        class="oe_highlight"
                    />
                    <button name="open_existing_session_cb" type="object" string="Open Session"
                        attrs="{'invisible' : [('posi_state', 'not in', ('opening_control',))]}"
                        class="oe_highlight"
                    />
                    <button name="open_existing_session_cb_close" type="object" string="Close Session"
                        attrs="{'invisible' : [('posi_state', 'not in', ('opened',))]}"
                    />
                    <button name="open_existing_session_cb" type="object" string="Close Session"
                        attrs="{'invisible' : [('posi_state', 'not in', ('closing_control',))]}"
                        class="oe_highlight"
                    />
                    <button name="open_session_cb" type="object" string="New Session"
                        attrs="{'invisible' : ['|', ('posi_state', '!=', False)]}"
                        class="oe_highlight"
                    />

                    <div attrs="{'invisible' : ['|', ('posi_state', '!=', False)]}" class="oe_view_nocontent">
                        <p class="oe_view_nocontent_create">
                          Click to start a session.
                        </p><p>
                          You may have to control your cash amount in your cash register, before
                          being able to start selling through the touchscreen interface.
                        </p>
                    </div>
                    <div attrs="{'invisible' : [('posi_state', '!=', 'opened')]}" class="oe_view_nocontent">
                        <p class="oe_view_nocontent_create">
                            Click to continue the session.
                        </p>
                        <p>
                            The session <field name="posi_session_name" class="oe_inline" /> (<field name="posi_session_username" class="oe_inline" />) is "<b><field name="posi_state_str" class="oe_inline" /></b>".<br/>
                            You can continue sales from the touchscreen interface by clicking on "Start Selling" or close the cash register session.
                        </p>
                    </div>

                </form>
            </field>
        </record>

        <record id="action_posi_session_opening" model="ir.actions.act_window">
            <field name="name">Your Session</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">posi.session.opening</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">inline</field>
        </record>

        <menuitem name="Daily Operations" id="menu_point_of_stock_inventory" parent="menu_point_stock_inventory_root" sequence="10"/>
        <menuitem action="action_posi_session_opening"
            parent="menu_point_of_stock_inventory"
            id="menu_posi_session_opening" sequence="0"/>


        <!--<record model="ir.actions.act_url" id="action_pos_pos">-->
            <!--<field name="name">Start Point of Sale</field>-->
            <!--<field name="url">/posi/web/</field>-->
            <!--<field name="target">self</field>-->
        <!--</record>-->

    </data>
</openerp>
